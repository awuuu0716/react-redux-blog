(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{41:function(n,t,e){"use strict";e.r(t);var r=e(1),o=e(0),c=e(17),i=e.n(c),u=e(2),a=e(11),s=e(6),b=e(4),f=e(18),d="token",j=function(n){localStorage.setItem(d,n)},l=function(){return localStorage.getItem(d)},p="https://student-json-api.lidemy.me",h=function(){var n=l();return fetch("".concat(p,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},x=Object(f.b)({name:"blog",initialState:{posts:[],paginate:[],userData:null,isLodingUser:!1,loginResponse:null,errorMessage:"",post:null},reducers:{setPosts:function(n,t){n.posts=t.payload},setPost:function(n,t){n.post=t.payload},setPaginate:function(n,t){n.paginate=t.payload},setUser:function(n,t){n.userData=t.payload},setIsLodingUser:function(n,t){n.isLodingUser=t.payload},setErrorMessage:function(n,t){n.errorMessage=t.payload},setLoginResponse:function(n,t){n.errorMessage=t.payload}}}),O=x.actions,g=O.setPosts,v=O.setPaginate,m=O.setUser,w=O.setIsLodingUser,y=O.setErrorMessage,k=(O.setLoginResponse,O.setPost),S=function(n){return function(t){(function(n){return fetch("".concat(p,"/posts?_page=").concat(n,"&_limit=5&_sort=id&_order=desc")).then((function(n){return n}))})(n).then((function(n){var e=n.clone(),r=Math.ceil(e.headers.get("x-total-count")/5);return t(v(function(n){for(var t=[],e=1;e<=n;e++)t.push(e);return t}(r))),n.json()})).then((function(n){t(g(n))}))}},z=function(n){return function(t){return function(n){return fetch("".concat(p,"/posts?id=").concat(n)).then((function(n){return n.json()}))}(n).then((function(n){return t(k(n[0])),n}))}},C=function(n){return function(t){return function(n){return fetch("".concat(p,"/posts/").concat(n),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(n){return n.json()}))}(n).then((function(n){return n}))}},L=function(n,t){return function(e){return function(n,t){return fetch("".concat(p,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(n,t).then((function(n){if(0!==n.ok)return j(n.token),h().then((function(n){if(1===n.ok)return e(m(n.data)),n;e(y(n.toString()))}));e(y(n.message))}))}},P=function(n,t){return function(e){return function(n,t){var e=l();return fetch("".concat(p,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(n,t).then((function(n){if(0!==n.ok)return n;e(y(n.message))}))}},T=function(n,t,e){return function(r){return function(n,t,e){return fetch("".concat(p,"/posts/").concat(e),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(n,t,e).then((function(n){if(0!==n.ok)return n;r(y(n.message))}))}},D=function(n){return n.blog.posts},E=function(n){return n.blog.post},q=function(n){return n.blog.paginate},R=function(n){return n.blog.userData},U=function(n){return n.blog.isLodingUser},A=function(n){return n.blog.errorMessage},M=x.reducer,J=e(3);function $(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 16px;\n  }\n"]);return $=function(){return n},n}function B(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"]);return B=function(){return n},n}function I(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]);return I=function(){return n},n}function N(){var n=Object(u.a)(["\n  color: black;\n  text-decoration: none;\n  user-select: none;\n  font-size: 32px;\n  font-weight: bold;\n"]);return N=function(){return n},n}function _(){var n=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0 32px;\n  background: white;\n"]);return _=function(){return n},n}var H=J.a.div(_()),F=Object(J.a)(a.b)(N()),G=J.a.div(I()),K=Object(J.a)(a.b)(B(),(function(n){return n.$active&&"background: rgba(0,0,0,0.1)"})),Q=J.a.div($(),G);function V(){var n=Object(b.c)(R),t=Object(b.c)(U),e=Object(s.g)().pathname,o=Object(s.f)(),c=Object(b.b)();return Object(r.jsxs)(H,{children:[Object(r.jsxs)(Q,{children:[Object(r.jsx)(F,{to:"/",children:"Blog"}),Object(r.jsxs)(G,{children:[Object(r.jsx)(K,{to:"/",$active:"/"===e,children:"HomePage"}),Object(r.jsx)(K,{to:"/about",$active:"/about"===e,children:"About"}),!t&&n&&Object(r.jsx)(K,{to:"/new-post",$active:"/new-post"===e,children:"New Post"})]})]}),Object(r.jsxs)(G,{children:[!t&&!n&&Object(r.jsx)(K,{to:"/login",$active:"/login"===e,children:"Log in"}),!t&&!n&&Object(r.jsx)(K,{to:"/sign-up",$active:"/sign-up"===e,children:"Sign up"}),!t&&n&&Object(r.jsx)(K,{to:"/",onClick:function(){j(""),c(m(null)),"/"!==e&&o.push("/")},children:"log out"})]})]})}var W=e(8);function X(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 500px;\n  height: 120px;\n  padding: 20px;\n  margin: 100px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return X=function(){return n},n}function Y(){var n=Object(u.a)(["\n  color: red;\n"]);return Y=function(){return n},n}var Z=J.a.div(Y()),nn=J.a.form(X());function tn(){var n=Object(b.c)(A),t=Object(o.useState)(""),e=Object(W.a)(t,2),c=e[0],i=e[1],u=Object(o.useState)(""),a=Object(W.a)(u,2),f=a[0],d=a[1],j=Object(s.f)(),l=Object(b.b)(),p=Object(o.useRef)(!1);return Object(r.jsxs)(nn,{onSubmit:function(n){n.preventDefault(),p.current||(p.current=!0,l(y("")),l(L(c,f)).then((function(n){p.current=!1,n&&j.push("/")})))},children:[Object(r.jsxs)("div",{children:["username:",Object(r.jsx)("input",{value:c,onChange:function(n){return i(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["password:",Object(r.jsx)("input",{value:f,type:"password",onChange:function(n){return d(n.target.value)},required:!0})]}),Object(r.jsx)("button",{type:"submit",children:"Log in"}),n&&Object(r.jsx)(Z,{children:n})]})}function en(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 500px;\n  height: 120px;\n  padding: 20px;\n  margin: 100px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return en=function(){return n},n}function rn(){var n=Object(u.a)(["\n  color: red;\n"]);return rn=function(){return n},n}var on=J.a.div(rn()),cn=J.a.form(en());function un(){var n=Object(b.b)(),t=Object(o.useState)(""),e=Object(W.a)(t,2),c=e[0],i=e[1],u=Object(o.useState)(""),a=Object(W.a)(u,2),f=a[0],d=a[1],l=Object(o.useState)(""),x=Object(W.a)(l,2),O=x[0],g=x[1],v=Object(o.useState)(""),w=Object(W.a)(v,2),y=w[0],k=w[1],S=Object(o.useRef)(!1),z=Object(s.f)();return Object(r.jsxs)(cn,{onSubmit:function(t){k(""),t.preventDefault(),S.current||(S.current=!0,function(n,t,e){return fetch("".concat(p,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(O,c,f).then((function(t){if(0===t.ok)return k(t.message);j(t.token),h().then((function(t){if(1!==t.ok)return j(""),k(t.toString());n(m(t.data)),z.push("/"),S.current=!1}))})))},children:[Object(r.jsxs)("div",{children:["nickname:",Object(r.jsx)("input",{value:O,onChange:function(n){return g(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["username:",Object(r.jsx)("input",{value:c,onChange:function(n){return i(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["password:",Object(r.jsx)("input",{value:f,type:"password",onChange:function(n){return d(n.target.value)},required:!0})]}),Object(r.jsx)("button",{type:"submit",children:"Sign Up"}),y&&Object(r.jsx)(on,{children:y})]})}function an(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 25px;\n  height: 25px;\n  margin: 0 10px;\n  border: 1px solid #fbfbfb;\n  border-radius: 3px;\n  list-style: none;\n  cursor: pointer;\n  font-size: 20px;\n  &:hover {\n    background: rgba(200, 200, 200, 0.1);\n  }\n"]);return an=function(){return n},n}function sn(){var n=Object(u.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  padding: 0;\n"]);return sn=function(){return n},n}function bn(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return bn=function(){return n},n}function fn(){var n=Object(u.a)(["\n  max-width: 500px;\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]);return fn=function(){return n},n}function dn(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n\n  &:hover {\n    background: rgba(200, 200, 200, 0.1);\n  }\n"]);return dn=function(){return n},n}function jn(){var n=Object(u.a)(["\n  width: 40%;\n  margin: 0 auto;\n"]);return jn=function(){return n},n}var ln=J.a.div(jn()),pn=J.a.div(dn()),hn=Object(J.a)(a.b)(fn()),xn=J.a.div(bn()),On=J.a.ul(sn()),gn=J.a.li(an());function vn(n){var t=n.post;return Object(r.jsxs)(pn,{children:[Object(r.jsx)(hn,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(xn,{children:t.createdAt&&new Date(t.createdAt).toLocaleString()})]})}function mn(){var n=Object(b.c)(D),t=Object(b.c)(q),e=Object(b.b)();Object(o.useEffect)((function(){return e(S(1))}),[e]);return Object(r.jsxs)(ln,{children:[n.length>0?n.map((function(n){return Object(r.jsx)(vn,{post:n},n.id)})):Object(r.jsx)(vn,{post:{title:"Loading..."}}),Object(r.jsx)(On,{children:n.length>0&&t.map((function(n){return Object(r.jsx)(gn,{onClick:function(){return function(n){return e(S(n))}(n)},children:n},n)}))})]})}function wn(){var n=Object(u.a)(["\n  font-size: 32px;\n  max-width: 600px;\n  color: #333;\n  word-wrap: break-word;\n"]);return wn=function(){return n},n}function yn(){var n=Object(u.a)(["\n  font-size: 20px;\n  border: 1px solid #333;\n  border-radius: 3px;\n  background: white;\n  color: #333;\n  cursor: pointer;\n  transition: all 0.1s ease-in-out;\n\n  &:hover {\n    background: red;\n    color: white;\n  }\n\n  & + & {\n    margin-left: 10px;\n\n    &:hover {\n      background: green;\n      color: white;\n    }\n  }\n"]);return yn=function(){return n},n}function kn(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  max-width: 600px;\n  word-wrap: break-word;\n"]);return kn=function(){return n},n}function Sn(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  margin-bottom: 20px;\n"]);return Sn=function(){return n},n}function zn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  font-size: 48px;\n  font-weight: bold;\n  color: #333;\n  margin: 10px 0;\n"]);return zn=function(){return n},n}function Cn(){var n=Object(u.a)(["\n  width: 40%;\n  margin: 0 auto;\n  padding-top: 50px;\n"]);return Cn=function(){return n},n}var Ln=J.a.div(Cn()),Pn=J.a.div(zn()),Tn=J.a.div(Sn()),Dn=J.a.div(kn()),En=J.a.button(yn()),qn=J.a.h1(wn());function Rn(){var n=Object(b.c)(R),t=Object(b.c)(E),e=Object(b.b)(),c=Object(s.f)(),i=Object(s.h)().id;Object(o.useEffect)((function(){return e(z(i)),function(){return e(k(null))}}),[e,i]);return Object(r.jsx)(Ln,{children:Object(r.jsxs)("div",{children:[Object(r.jsxs)(Pn,{children:[Object(r.jsx)(qn,{children:t&&t.title}),n&&Object(r.jsxs)("div",{children:[Object(r.jsx)(En,{onClick:function(){return function(n){e(C(n)).then((function(){return c.push("/")}))}(i)},children:"Delete"}),Object(r.jsx)(En,{onClick:function(){return function(n){c.push("/edit/".concat(n))}(i)},children:"Edit"})]})]}),Object(r.jsx)(Tn,{children:t&&new Date(t.createdAt).toLocaleString()}),Object(r.jsx)(Dn,{children:t&&t.body})]})})}function Un(){var n=Object(u.a)(["\n  width: 80px;\n  height: 35px;\n  border: none;\n  outline: none;\n  background: rgb(26, 137, 23);\n  cursor: pointer;\n  border-radius: 5px;\n  color: #fff;\n\n  &:hover {\n    background: rgb(12, 110, 15);\n  }\n"]);return Un=function(){return n},n}function An(){var n=Object(u.a)(["\n  width: 100%;\n  border: none;\n  font-size: 24px;\n  outline: none;\n  resize: none;\n"]);return An=function(){return n},n}function Mn(){var n=Object(u.a)(["\n  border: none;\n  font-size: 40px;\n  font-weight: bold;\n  outline: none;\n  color: #333;\n  margin-bottom: 20px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0);\n  transition: border 0.2s ease-in-out;\n\n  &:focus {\n    border-bottom: 2px solid rgba(0, 0, 0, 0.2);\n  }\n"]);return Mn=function(){return n},n}function Jn(){var n=Object(u.a)(["\n  width: 100%;\n"]);return Jn=function(){return n},n}function $n(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-between;\n  width: 800px;\n  padding: 20px;\n  margin: 60px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return $n=function(){return n},n}function Bn(){var n=Object(u.a)(["\n  color: red;\n"]);return Bn=function(){return n},n}var In=J.a.div(Bn()),Nn=J.a.form($n()),_n=J.a.div(Jn()),Hn=J.a.input(Mn()),Fn=J.a.textarea(An()),Gn=J.a.button(Un());function Kn(){var n=Object(o.useState)(""),t=Object(W.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)(""),u=Object(W.a)(i,2),a=u[0],f=u[1],d=Object(b.c)(A),j=Object(s.f)(),l=Object(o.useRef)(!1),p=Object(b.b)();return Object(r.jsxs)(Nn,{onSubmit:function(n){n.preventDefault(),l.current||(l.current=!0,p(P(e,a)).then((function(n){l.current=!1,n&&j.push("/")})))},children:[Object(r.jsx)(_n,{children:Object(r.jsx)(Hn,{placeholder:"Title",value:e,onChange:function(n){return c(n.target.value)},required:!0})}),Object(r.jsx)(_n,{children:Object(r.jsx)(Fn,{rows:"10",placeholder:"Tell your story...",value:a,onChange:function(n){return f(n.target.value)},required:!0})}),Object(r.jsx)(Gn,{type:"submit",children:"Submit"}),d&&Object(r.jsx)(In,{children:d})]})}function Qn(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n"]);return Qn=function(){return n},n}function Vn(){var n=Object(u.a)(["\n  font-size: 48px;\n  font-weight: bold;\n  text-align: center;\n  color: #333;\n  margin: 10px 0;\n"]);return Vn=function(){return n},n}function Wn(){var n=Object(u.a)(["\n  width: 40%;\n  margin: 0 auto;\n  padding-top: 50px;\n"]);return Wn=function(){return n},n}var Xn=J.a.div(Wn()),Yn=J.a.div(Vn()),Zn=J.a.div(Qn());function nt(){return Object(r.jsx)(Xn,{children:Object(r.jsxs)("div",{children:[Object(r.jsx)(Yn,{children:"About This Blog"}),Object(r.jsx)(Zn,{children:"A blog that made up with React, still practing T_T."})]})})}function tt(){var n=Object(u.a)(["\n  width: 80px;\n  height: 35px;\n  border: none;\n  outline: none;\n  background: rgb(26, 137, 23);\n  cursor: pointer;\n  border-radius: 5px;\n  color: #fff;\n\n  &:hover {\n    background: rgb(12, 110, 15);\n  }\n"]);return tt=function(){return n},n}function et(){var n=Object(u.a)(["\n  width: 100%;\n  border: none;\n  font-size: 24px;\n  outline: none;\n  resize: none;\n"]);return et=function(){return n},n}function rt(){var n=Object(u.a)(["\n  border: none;\n  font-size: 40px;\n  font-weight: bold;\n  outline: none;\n  color: #333;\n  margin-bottom: 20px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0);\n  transition: border 0.2s ease-in-out;\n\n  &:focus {\n    border-bottom: 2px solid rgba(0, 0, 0, 0.2);\n  }\n"]);return rt=function(){return n},n}function ot(){var n=Object(u.a)(["\n  width: 100%;\n"]);return ot=function(){return n},n}function ct(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-between;\n  width: 800px;\n  padding: 20px;\n  margin: 60px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return ct=function(){return n},n}function it(){var n=Object(u.a)(["\n  color: red;\n"]);return it=function(){return n},n}var ut=J.a.div(it()),at=J.a.form(ct()),st=J.a.div(ot()),bt=J.a.input(rt()),ft=J.a.textarea(et()),dt=J.a.button(tt());function jt(){var n=Object(o.useState)(""),t=Object(W.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)(""),u=Object(W.a)(i,2),a=u[0],f=u[1],d=Object(b.c)(A),j=Object(s.f)(),l=Object(s.h)().id,p=Object(o.useRef)(!1),h=Object(b.b)();return Object(o.useEffect)((function(){return h(z(l)).then((function(n){c(n[0].title),f(n[0].body)})),function(){return h(k(null))}}),[h,l]),Object(r.jsxs)(at,{onSubmit:function(n){n.preventDefault(),p.current||(p.current=!0,h(T(e,a,l)).then((function(n){p.current=!1,n&&j.push("/")})))},children:[Object(r.jsx)(st,{children:Object(r.jsx)(bt,{placeholder:"Title",value:e,onChange:function(n){return c(n.target.value)},required:!0})}),Object(r.jsx)(st,{children:Object(r.jsx)(ft,{rows:"10",placeholder:"Tell your story...",value:a,onChange:function(n){return f(n.target.value)},required:!0})}),Object(r.jsx)(dt,{type:"submit",children:"Submit"}),d&&Object(r.jsx)(ut,{children:d})]})}function lt(){var n=Object(u.a)(["\n  padding-top: 64px;\n"]);return lt=function(){return n},n}var pt=J.a.div(lt());var ht=function(){var n=Object(b.c)(R),t=Object(b.b)();return Object(o.useEffect)((function(){l()&&(t((function(n){h().then((function(t){t.ok&&n(m(t.data)),n(w(!1))}))})),t(w(!0)))}),[t]),Object(r.jsx)(pt,{children:Object(r.jsxs)(a.a,{children:[Object(r.jsx)(V,{}),Object(r.jsxs)(s.c,{children:[Object(r.jsx)(s.a,{exact:!0,path:"/",children:Object(r.jsx)(mn,{})}),Object(r.jsx)(s.a,{exact:!0,path:"/login",children:Object(r.jsx)(tn,{})}),Object(r.jsx)(s.a,{path:"/post/:id",children:Object(r.jsx)(Rn,{})}),Object(r.jsx)(s.a,{path:"/new-post",children:n&&Object(r.jsx)(Kn,{})}),Object(r.jsx)(s.a,{path:"/edit/:id",children:n&&Object(r.jsx)(jt,{})}),Object(r.jsx)(s.a,{path:"/about",children:Object(r.jsx)(nt,{})}),Object(r.jsx)(s.a,{path:"/sign-up",children:Object(r.jsx)(un,{})})]})]})})},xt=Object(f.a)({reducer:{blog:M}});i.a.render(Object(r.jsx)(b.a,{store:xt,children:Object(r.jsx)(ht,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.cd3b9162.chunk.js.map