(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{41:function(n,t,e){"use strict";e.r(t);var r=e(1),o=e(0),c=e(17),i=e.n(c),u=e(2),a=e(11),s=e(6),b=e(4),f=e(18),d="token",j=function(n){localStorage.setItem(d,n)},l=function(){return localStorage.getItem(d)},p="https://student-json-api.lidemy.me",h=function(){var n=l();return fetch("".concat(p,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},x=Object(f.b)({name:"blog",initialState:{posts:[],paginate:[],userData:null,isLodingUser:!1,loginResponse:null,errorMessage:"",post:null},reducers:{setPosts:function(n,t){n.posts=t.payload},setPost:function(n,t){n.post=t.payload},setPaginate:function(n,t){n.paginate=t.payload},setUser:function(n,t){n.userData=t.payload},setIsLodingUser:function(n,t){n.isLodingUser=t.payload},setErrorMessage:function(n,t){n.errorMessage=t.payload},setLoginResponse:function(n,t){n.errorMessage=t.payload}}}),O=x.actions,g=O.setPosts,v=O.setPaginate,m=O.setUser,w=O.setIsLodingUser,y=O.setErrorMessage,k=(O.setLoginResponse,O.setPost),S=function(n){return function(t){(function(n){return fetch("".concat(p,"/posts?_page=").concat(n,"&_limit=5&_sort=id&_order=desc")).then((function(n){return n}))})(n).then((function(n){var e=n.clone(),r=Math.ceil(e.headers.get("x-total-count")/5);return t(v(function(n){for(var t=[],e=1;e<=n;e++)t.push(e);return t}(r))),n.json()})).then((function(n){t(g(n))}))}},z=function(n){return function(t){return function(n){return fetch("".concat(p,"/posts?id=").concat(n)).then((function(n){return n.json()}))}(n).then((function(n){return t(k(n[0])),n}))}},C=function(n){return function(t){return function(n){return fetch("".concat(p,"/posts/").concat(n),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(n){return n.json()}))}(n).then((function(n){return n}))}},E=function(n,t){return function(e){return e(y("")),function(n,t){return fetch("".concat(p,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(n,t).then((function(n){if(0!==n.ok)return j(n.token),h().then((function(n){if(1===n.ok)return e(m(n.data)),n;e(y(n.toString()))}));e(y(n.message))}))}},L=function(n){var t=n.username,e=n.password,r=n.nickname;return function(n){return n(y("")),function(n){var t=n.username,e=n.password,r=n.nickname;return fetch("".concat(p,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:r,username:t,password:e})}).then((function(n){return n.json()}))}({username:t,password:e,nickname:r}).then((function(t){if(0!==t.ok)return j(t.token),h().then((function(t){if(1===t.ok)return n(m(t.data)),t;n(y(t.toString()))}));n(y(t.message))}))}},P=function(n,t){return function(e){return function(n,t){var e=l();return fetch("".concat(p,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(n,t).then((function(n){if(0!==n.ok)return n;e(y(n.message))}))}},T=function(n,t,e){return function(r){return function(n,t,e){return fetch("".concat(p,"/posts/").concat(e),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(n,t,e).then((function(n){if(0!==n.ok)return n;r(y(n.message))}))}},D=function(n){return n.blog.posts},q=function(n){return n.blog.post},R=function(n){return n.blog.paginate},U=function(n){return n.blog.userData},A=function(n){return n.blog.isLodingUser},M=function(n){return n.blog.errorMessage},J=x.reducer,$=e(3);function B(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 16px;\n  }\n"]);return B=function(){return n},n}function I(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"]);return I=function(){return n},n}function N(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]);return N=function(){return n},n}function _(){var n=Object(u.a)(["\n  color: black;\n  text-decoration: none;\n  user-select: none;\n  font-size: 32px;\n  font-weight: bold;\n"]);return _=function(){return n},n}function H(){var n=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0 32px;\n  background: white;\n"]);return H=function(){return n},n}var F=$.a.div(H()),G=Object($.a)(a.b)(_()),K=$.a.div(N()),Q=Object($.a)(a.b)(I(),(function(n){return n.$active&&"background: rgba(0,0,0,0.1)"})),V=$.a.div(B(),K);function W(){var n=Object(b.c)(U),t=Object(b.c)(A),e=Object(s.g)().pathname,o=Object(s.f)(),c=Object(b.b)();return Object(r.jsxs)(F,{children:[Object(r.jsxs)(V,{children:[Object(r.jsx)(G,{to:"/",children:"Blog"}),Object(r.jsxs)(K,{children:[Object(r.jsx)(Q,{to:"/",$active:"/"===e,children:"HomePage"}),Object(r.jsx)(Q,{to:"/about",$active:"/about"===e,children:"About"}),!t&&n&&Object(r.jsx)(Q,{to:"/new-post",$active:"/new-post"===e,children:"New Post"})]})]}),Object(r.jsxs)(K,{children:[!t&&!n&&Object(r.jsx)(Q,{to:"/login",$active:"/login"===e,children:"Log in"}),!t&&!n&&Object(r.jsx)(Q,{to:"/sign-up",$active:"/sign-up"===e,children:"Sign up"}),!t&&n&&Object(r.jsx)(Q,{to:"/",onClick:function(){j(""),c(m(null)),"/"!==e&&o.push("/")},children:"log out"})]})]})}var X=e(8);function Y(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 500px;\n  height: 120px;\n  padding: 20px;\n  margin: 100px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return Y=function(){return n},n}function Z(){var n=Object(u.a)(["\n  color: red;\n"]);return Z=function(){return n},n}var nn=$.a.div(Z()),tn=$.a.form(Y());function en(){var n=Object(b.c)(M),t=Object(o.useState)(""),e=Object(X.a)(t,2),c=e[0],i=e[1],u=Object(o.useState)(""),a=Object(X.a)(u,2),f=a[0],d=a[1],j=Object(s.f)(),l=Object(b.b)(),p=Object(o.useRef)(!1);return Object(o.useEffect)((function(){return function(){return l(y(""))}}),[l]),Object(r.jsxs)(tn,{onSubmit:function(n){n.preventDefault(),p.current||(p.current=!0,l(E(c,f)).then((function(n){p.current=!1,n&&j.push("/")})))},children:[Object(r.jsxs)("div",{children:["username:",Object(r.jsx)("input",{value:c,onChange:function(n){return i(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["password:",Object(r.jsx)("input",{value:f,type:"password",onChange:function(n){return d(n.target.value)},required:!0})]}),Object(r.jsx)("button",{type:"submit",children:"Log in"}),n&&Object(r.jsx)(nn,{children:n})]})}function rn(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 500px;\n  height: 120px;\n  padding: 20px;\n  margin: 100px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return rn=function(){return n},n}function on(){var n=Object(u.a)(["\n  color: red;\n"]);return on=function(){return n},n}var cn=$.a.div(on()),un=$.a.form(rn());function an(){var n=Object(o.useState)(""),t=Object(X.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)(""),u=Object(X.a)(i,2),a=u[0],f=u[1],d=Object(o.useState)(""),j=Object(X.a)(d,2),l=j[0],p=j[1],h=Object(b.c)(M),x=Object(o.useRef)(!1),O=Object(s.f)(),g=Object(b.b)();return Object(o.useEffect)((function(){return function(){return g(y(""))}}),[g]),Object(r.jsxs)(un,{onSubmit:function(n){n.preventDefault(),x.current||(x.current=!0,g(L({username:e,password:a,nickname:l})).then((function(n){x.current=!1,n&&O.push("/")})))},children:[Object(r.jsxs)("div",{children:["nickname:",Object(r.jsx)("input",{value:l,onChange:function(n){return p(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["username:",Object(r.jsx)("input",{value:e,onChange:function(n){return c(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["password:",Object(r.jsx)("input",{value:a,type:"password",onChange:function(n){return f(n.target.value)},required:!0})]}),Object(r.jsx)("button",{type:"submit",children:"Sign Up"}),h&&Object(r.jsx)(cn,{children:h})]})}function sn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 25px;\n  height: 25px;\n  margin: 0 10px;\n  border: 1px solid #fbfbfb;\n  border-radius: 3px;\n  list-style: none;\n  cursor: pointer;\n  font-size: 20px;\n  &:hover {\n    background: rgba(200, 200, 200, 0.1);\n  }\n"]);return sn=function(){return n},n}function bn(){var n=Object(u.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  padding: 0;\n"]);return bn=function(){return n},n}function fn(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return fn=function(){return n},n}function dn(){var n=Object(u.a)(["\n  max-width: 500px;\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]);return dn=function(){return n},n}function jn(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n\n  &:hover {\n    background: rgba(200, 200, 200, 0.1);\n  }\n"]);return jn=function(){return n},n}function ln(){var n=Object(u.a)(["\n  width: 40%;\n  margin: 0 auto;\n"]);return ln=function(){return n},n}var pn=$.a.div(ln()),hn=$.a.div(jn()),xn=Object($.a)(a.b)(dn()),On=$.a.div(fn()),gn=$.a.ul(bn()),vn=$.a.li(sn());function mn(n){var t=n.post;return Object(r.jsxs)(hn,{children:[Object(r.jsx)(xn,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(On,{children:t.createdAt&&new Date(t.createdAt).toLocaleString()})]})}function wn(){var n=Object(b.c)(D),t=Object(b.c)(R),e=Object(b.b)();Object(o.useEffect)((function(){return e(S(1))}),[e]);return Object(r.jsxs)(pn,{children:[n.length>0?n.map((function(n){return Object(r.jsx)(mn,{post:n},n.id)})):Object(r.jsx)(mn,{post:{title:"Loading..."}}),Object(r.jsx)(gn,{children:n.length>0&&t.map((function(n){return Object(r.jsx)(vn,{onClick:function(){return function(n){return e(S(n))}(n)},children:n},n)}))})]})}function yn(){var n=Object(u.a)(["\n  font-size: 32px;\n  max-width: 600px;\n  color: #333;\n  word-wrap: break-word;\n"]);return yn=function(){return n},n}function kn(){var n=Object(u.a)(["\n  font-size: 20px;\n  border: 1px solid #333;\n  border-radius: 3px;\n  background: white;\n  color: #333;\n  cursor: pointer;\n  transition: all 0.1s ease-in-out;\n\n  &:hover {\n    background: red;\n    color: white;\n  }\n\n  & + & {\n    margin-left: 10px;\n\n    &:hover {\n      background: green;\n      color: white;\n    }\n  }\n"]);return kn=function(){return n},n}function Sn(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  max-width: 600px;\n  word-wrap: break-word;\n"]);return Sn=function(){return n},n}function zn(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  margin-bottom: 20px;\n"]);return zn=function(){return n},n}function Cn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  font-size: 48px;\n  font-weight: bold;\n  color: #333;\n  margin: 10px 0;\n"]);return Cn=function(){return n},n}function En(){var n=Object(u.a)(["\n  width: 40%;\n  margin: 0 auto;\n  padding-top: 50px;\n"]);return En=function(){return n},n}var Ln=$.a.div(En()),Pn=$.a.div(Cn()),Tn=$.a.div(zn()),Dn=$.a.div(Sn()),qn=$.a.button(kn()),Rn=$.a.h1(yn());function Un(){var n=Object(b.c)(U),t=Object(b.c)(q),e=Object(b.b)(),c=Object(s.f)(),i=Object(s.h)().id;Object(o.useEffect)((function(){return e(z(i)),function(){return e(k(null))}}),[e,i]);return Object(r.jsx)(Ln,{children:Object(r.jsxs)("div",{children:[Object(r.jsxs)(Pn,{children:[Object(r.jsx)(Rn,{children:t&&t.title}),n&&Object(r.jsxs)("div",{children:[Object(r.jsx)(qn,{onClick:function(){return function(n){e(C(n)).then((function(){return c.push("/")}))}(i)},children:"Delete"}),Object(r.jsx)(qn,{onClick:function(){return function(n){c.push("/edit/".concat(n))}(i)},children:"Edit"})]})]}),Object(r.jsx)(Tn,{children:t&&new Date(t.createdAt).toLocaleString()}),Object(r.jsx)(Dn,{children:t&&t.body})]})})}function An(){var n=Object(u.a)(["\n  width: 80px;\n  height: 35px;\n  border: none;\n  outline: none;\n  background: rgb(26, 137, 23);\n  cursor: pointer;\n  border-radius: 5px;\n  color: #fff;\n\n  &:hover {\n    background: rgb(12, 110, 15);\n  }\n"]);return An=function(){return n},n}function Mn(){var n=Object(u.a)(["\n  width: 100%;\n  border: none;\n  font-size: 24px;\n  outline: none;\n  resize: none;\n"]);return Mn=function(){return n},n}function Jn(){var n=Object(u.a)(["\n  border: none;\n  font-size: 40px;\n  font-weight: bold;\n  outline: none;\n  color: #333;\n  margin-bottom: 20px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0);\n  transition: border 0.2s ease-in-out;\n\n  &:focus {\n    border-bottom: 2px solid rgba(0, 0, 0, 0.2);\n  }\n"]);return Jn=function(){return n},n}function $n(){var n=Object(u.a)(["\n  width: 100%;\n"]);return $n=function(){return n},n}function Bn(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-between;\n  width: 800px;\n  padding: 20px;\n  margin: 60px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return Bn=function(){return n},n}function In(){var n=Object(u.a)(["\n  color: red;\n"]);return In=function(){return n},n}var Nn=$.a.div(In()),_n=$.a.form(Bn()),Hn=$.a.div($n()),Fn=$.a.input(Jn()),Gn=$.a.textarea(Mn()),Kn=$.a.button(An());function Qn(){var n=Object(o.useState)(""),t=Object(X.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)(""),u=Object(X.a)(i,2),a=u[0],f=u[1],d=Object(b.c)(M),j=Object(s.f)(),l=Object(o.useRef)(!1),p=Object(b.b)();return Object(r.jsxs)(_n,{onSubmit:function(n){n.preventDefault(),l.current||(l.current=!0,p(P(e,a)).then((function(n){l.current=!1,n&&j.push("/")})))},children:[Object(r.jsx)(Hn,{children:Object(r.jsx)(Fn,{placeholder:"Title",value:e,onChange:function(n){return c(n.target.value)},required:!0})}),Object(r.jsx)(Hn,{children:Object(r.jsx)(Gn,{rows:"10",placeholder:"Tell your story...",value:a,onChange:function(n){return f(n.target.value)},required:!0})}),Object(r.jsx)(Kn,{type:"submit",children:"Submit"}),d&&Object(r.jsx)(Nn,{children:d})]})}function Vn(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n"]);return Vn=function(){return n},n}function Wn(){var n=Object(u.a)(["\n  font-size: 48px;\n  font-weight: bold;\n  text-align: center;\n  color: #333;\n  margin: 10px 0;\n"]);return Wn=function(){return n},n}function Xn(){var n=Object(u.a)(["\n  width: 40%;\n  margin: 0 auto;\n  padding-top: 50px;\n"]);return Xn=function(){return n},n}var Yn=$.a.div(Xn()),Zn=$.a.div(Wn()),nt=$.a.div(Vn());function tt(){return Object(r.jsx)(Yn,{children:Object(r.jsxs)("div",{children:[Object(r.jsx)(Zn,{children:"About This Blog"}),Object(r.jsx)(nt,{children:"A blog that made up with React, still practing T_T."})]})})}function et(){var n=Object(u.a)(["\n  width: 80px;\n  height: 35px;\n  border: none;\n  outline: none;\n  background: rgb(26, 137, 23);\n  cursor: pointer;\n  border-radius: 5px;\n  color: #fff;\n\n  &:hover {\n    background: rgb(12, 110, 15);\n  }\n"]);return et=function(){return n},n}function rt(){var n=Object(u.a)(["\n  width: 100%;\n  border: none;\n  font-size: 24px;\n  outline: none;\n  resize: none;\n"]);return rt=function(){return n},n}function ot(){var n=Object(u.a)(["\n  border: none;\n  font-size: 40px;\n  font-weight: bold;\n  outline: none;\n  color: #333;\n  margin-bottom: 20px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0);\n  transition: border 0.2s ease-in-out;\n\n  &:focus {\n    border-bottom: 2px solid rgba(0, 0, 0, 0.2);\n  }\n"]);return ot=function(){return n},n}function ct(){var n=Object(u.a)(["\n  width: 100%;\n"]);return ct=function(){return n},n}function it(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-between;\n  width: 800px;\n  padding: 20px;\n  margin: 60px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return it=function(){return n},n}function ut(){var n=Object(u.a)(["\n  color: red;\n"]);return ut=function(){return n},n}var at=$.a.div(ut()),st=$.a.form(it()),bt=$.a.div(ct()),ft=$.a.input(ot()),dt=$.a.textarea(rt()),jt=$.a.button(et());function lt(){var n=Object(o.useState)(""),t=Object(X.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)(""),u=Object(X.a)(i,2),a=u[0],f=u[1],d=Object(b.c)(M),j=Object(s.f)(),l=Object(s.h)().id,p=Object(o.useRef)(!1),h=Object(b.b)();return Object(o.useEffect)((function(){return h(z(l)).then((function(n){c(n[0].title),f(n[0].body)})),function(){return h(k(null))}}),[h,l]),Object(r.jsxs)(st,{onSubmit:function(n){n.preventDefault(),p.current||(p.current=!0,h(T(e,a,l)).then((function(n){p.current=!1,n&&j.push("/")})))},children:[Object(r.jsx)(bt,{children:Object(r.jsx)(ft,{placeholder:"Title",value:e,onChange:function(n){return c(n.target.value)},required:!0})}),Object(r.jsx)(bt,{children:Object(r.jsx)(dt,{rows:"10",placeholder:"Tell your story...",value:a,onChange:function(n){return f(n.target.value)},required:!0})}),Object(r.jsx)(jt,{type:"submit",children:"Submit"}),d&&Object(r.jsx)(at,{children:d})]})}function pt(){var n=Object(u.a)(["\n  padding-top: 64px;\n"]);return pt=function(){return n},n}var ht=$.a.div(pt());var xt=function(){var n=Object(b.c)(U),t=Object(b.b)();return Object(o.useEffect)((function(){l()&&(t((function(n){h().then((function(t){t.ok&&n(m(t.data)),n(w(!1))}))})),t(w(!0)))}),[t]),Object(r.jsx)(ht,{children:Object(r.jsxs)(a.a,{children:[Object(r.jsx)(W,{}),Object(r.jsxs)(s.c,{children:[Object(r.jsx)(s.a,{exact:!0,path:"/",children:Object(r.jsx)(wn,{})}),Object(r.jsx)(s.a,{exact:!0,path:"/login",children:Object(r.jsx)(en,{})}),Object(r.jsx)(s.a,{path:"/post/:id",children:Object(r.jsx)(Un,{})}),Object(r.jsx)(s.a,{path:"/new-post",children:n&&Object(r.jsx)(Qn,{})}),Object(r.jsx)(s.a,{path:"/edit/:id",children:n&&Object(r.jsx)(lt,{})}),Object(r.jsx)(s.a,{path:"/about",children:Object(r.jsx)(tt,{})}),Object(r.jsx)(s.a,{path:"/sign-up",children:Object(r.jsx)(an,{})})]})]})})},Ot=Object(f.a)({reducer:{blog:J}});i.a.render(Object(r.jsx)(b.a,{store:Ot,children:Object(r.jsx)(xt,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.acd55104.chunk.js.map